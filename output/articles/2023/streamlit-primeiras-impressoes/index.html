<!doctype html>
<html lang="pt">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>  Streamlit: interfaces para projetos de Inteligência Artifical de um jeito fácil | Giliard Godoi
</title>
  <link rel="canonical" href="../../../articles/2023/streamlit-primeiras-impressoes/index.html">

    <link rel="apple-touch-icon" href="../../../apple-touch-icon.png" sizes="180x180">
    <link rel="icon" type="image/png" href="../../../favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../../favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="../../../manifest.json">
    <meta name="theme-color" content="#333333">

  <link rel="stylesheet" href="../../../theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="../../../theme/css/fontawesome.min.css">
  <link rel="stylesheet" href="../../../theme/css/pygments/monokai.min.css">
  <link rel="stylesheet" href="../../../theme/css/theme.css">
  <link rel="stylesheet" href="../../../theme/css/oldstyle.css">

  
  <meta name="description" content="Este artigo é um breve relato sobre as minhas impressões utilizando o Streamlit.">


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">
    <div class="col-sm-4">
      <a href="../../../">
        <img class="img-fluid rounded" src=../../../images/profile-park.png width=250 height=150 alt="Giliard Godoi">
      </a>
    </div>
  <div class="col-sm-8">
    <h1 class="title"><a href="../../../">Giliard Godoi</a></h1>
      <p class="text-muted">Uma história sobre aprendizados</p>
      <ul class="list-inline">
            <li class="list-inline-item"><a href="../../../pages/sobre/">Sobre</a></li>
            <li class="list-inline-item"><a href="../../../pages/contato/">Contato</a></li>
            <li class=" list-inline-item text-muted">|</li>
          <li class="list-inline-item"><a class="fab fa-twitter" href="https://twitter.com/giliardgodoi" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-github" href="https://github.com/GiliardGodoi" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-linkedin-in" href="https://www.linkedin.com/in/giliardgodoi/" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-youtube" href="https://www.youtube.com/user/GiliardGodoi" target="_blank"></a></li>
      </ul>
  </div>
</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>  Streamlit: interfaces para projetos de Inteligência Artifical de um jeito&nbsp;fácil
</h1>
      <hr>
  <article class="article">
    <header>
      <p style="font-style: italic;">
        Este artigo é um breve relato sobre as minhas impressões utilizando o Streamlit.
      </p>
      <ul class="list-inline">
        <li class="list-inline-item text-muted" title="2023-06-26T00:00:00-03:00">
          <i class="fas fa-clock"></i>
          seg 26 junho 2023
        </li>
        <li class="list-inline-item">
          <i class="fas fa-folder-open"></i>
          <a href="../../../category/programming-skills">programming-skills</a>
        </li>
      </ul>
    </header>
    <div class="content">
      <p><a href="https://streamlit.io/">Streamlit</a> é uma biblioteca low-code para construir interfaces web para projetos de Data Science e Inteligência Artificial.
Imagine que você quer prototipar rapidamente uma tela, para demonstrar o funcionamento de seu modelo, ou como ele poderá ser utilizado pelo seu cliente.
O Streamlit pode te ajudar a criar o protótipo de sua aplicação, demonstrando o real valor do seu projeto para possíveis <a href="https://pt.wikipedia.org/wiki/Stakeholder"><em>stakeholders</em></a>.</p>
<h1>Facilidade de uso</h1>
<p>Diferente de outras opções, o Streamlit presa pela facilidade do seu uso.
O comando para instalar é:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>streamlit
</code></pre></div>
<blockquote class="blockquote">
<p>Alguns meses atrás o streamlit não estava disponível para instalar via  <code>conda install</code> . Porém, parece que agora está como segundo informações oficiais dessa <a href="https://anaconda.org/conda-forge/streamlit">página</a>.</p>
</blockquote>
<p>Uma aplicação é definida por um <em>script</em> em Python.
Por exemplo, para criar uma tela de boas vindas, só precisaríamos das seguintes linhas de código:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>

<span class="sd">'''# Boas Vindas ao mundo do Streamlit'''</span>

<span class="n">nome</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_input</span><span class="p">(</span><span class="s1">'Digite o seu nome:'</span><span class="p">)</span>

<span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Seja bem vindo, </span><span class="si">{</span><span class="n">nome</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</code></pre></div>
<p>Digamos que esse código tenha sido salvo no arquivo <code>app.py</code>. Para executar executar a aplicação localmente, executamos o seguinte comando no terminal:</p>
<div class="highlight"><pre><span></span><code>streamlit<span class="w"> </span>run<span class="w"> </span>app.py
</code></pre></div>
<p>Imediantamente uma aplicação é lançada no <code>localhost</code> do seu navegador.</p>
<p>Observer que o título de boas vindas foi mostrado na página da aplicação, e no <em>script</em> ela foi inserida como uma <em>string</em> e dentro dela, foi específicado um título utilizando uma sintaxe <a href="https://pt.wikipedia.org/wiki/Markdown">Markdown</a>.</p>
<p>De maneira geral, qualquer objeto que não seja atribuída a uma variável vai ter o mesmo comportamento.
É como se, por baixo dos panos, o Streamlit utilizasse a função <code>st.write</code>, que é responsável por entender o tipo da variável e criar uma representação adequada na tela da aplicação.</p>
<h1>Documentação excelente</h1>
<p>O Streamlit possui uma <a href="https://docs.streamlit.io/">documentação</a> fácil de navegar, e que apresenta as principais funcionalidades da biblioteca de um jeito intuitivo.</p>
<p>Por exemplo, além da função <code>st.write</code> existem outras funções especializadas para exibir algum tipo de texto.
O bloco de código abaixo lista algumas dessas funções:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>

<span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="s2">"# Hello **world**!"</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Title"</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="s2">"Header"</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">subheader</span><span class="p">(</span><span class="s2">"Subheader"</span><span class="p">)</span>

<span class="n">st</span><span class="o">.</span><span class="n">caption</span><span class="p">(</span><span class="s2">"Caption"</span><span class="p">)</span>

<span class="n">st</span><span class="o">.</span><span class="n">code</span><span class="p">(</span><span class="s2">"code = 'block'"</span><span class="p">)</span>

<span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">echo</span><span class="p">():</span>
    <span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"Show as it is!"</span><span class="p">)</span>

<span class="n">st</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">"Text"</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">latex</span><span class="p">(</span><span class="s2">"x + 2"</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">divider</span><span class="p">()</span>
</code></pre></div>
<p>Também existem funções especializadas para apresentar dados:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>

<span class="n">st</span><span class="o">.</span><span class="n">dataframe</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>   <span class="c1"># para data frames de uma forma geral</span>
<span class="n">st</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>       <span class="c1"># para tabelas estáticas</span>
<span class="n">st</span><span class="o">.</span><span class="n">data_editor</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="c1"># para data frames editáveis</span>

<span class="n">st</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">my_dict</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">metric</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Temperature"</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">"70 °F"</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="s2">"1.2 °F"</span><span class="p">)</span>
</code></pre></div>
<p>Exibir arquivos de outras mídias: imagens, áudio e vídeos.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>

<span class="n">st</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">numpy_array</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">audio</span><span class="p">(</span><span class="n">audio_bytes</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">video</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre></div>
<p>Consulte a <a href="https://docs.streamlit.io/develop/api-reference/media">documentação</a> para conferir as possibilidades de uso dessas funções.</p>
<p>Também temos as funções especializadas para exibir gráficos:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>

<span class="c1"># Gráficos simples</span>
<span class="n">st</span><span class="o">.</span><span class="n">area_chart</span><span class="p">(</span><span class="n">data_frame</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">bar_chart</span><span class="p">(</span><span class="n">data_frame</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">line_chart</span><span class="p">(</span><span class="n">data_frame</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">scatter_chart</span><span class="p">(</span><span class="n">data_frame</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span>

<span class="c1"># Especializadas para algumas bibliotecas de visualização de dados</span>
<span class="n">st</span><span class="o">.</span><span class="n">pyplot</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">altair_chart</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">vega_lite_chart</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">plotly_chart</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">bokeh_chart</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">pydeck_chart</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</code></pre></div>
<p>Também temos os <em>widgets</em> para entrada de dados:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>

<span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="s1">'click me'</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span><span class="s1">'label'</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">toggle</span><span class="p">(</span><span class="s1">'label'</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">radio</span><span class="p">(</span><span class="s1">'label'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">])</span>
<span class="n">st</span><span class="o">.</span><span class="n">selectbox</span><span class="p">(</span><span class="s1">'label'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">])</span>
<span class="n">st</span><span class="o">.</span><span class="n">multiselect</span><span class="p">(</span><span class="s1">'label'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">])</span>
<span class="n">st</span><span class="o">.</span><span class="n">select_slider</span><span class="p">(</span><span class="s1">'label'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">])</span>
<span class="n">st</span><span class="o">.</span><span class="n">color_picker</span><span class="p">(</span><span class="s1">'label'</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">number_input</span><span class="p">(</span><span class="s1">'label'</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">slider</span><span class="p">(</span><span class="s1">'label'</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">text_input</span><span class="p">(</span><span class="s1">'label'</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span><span class="s1">'label'</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Uma lista completa dos widgets disponíveis pode ser encontrada no seguinte <a href="https://docs.streamlit.io/library/api-reference/widgets">endereço</a>.</p>
<h1>Para usuários avançados</h1>
<p>Caso os widgets disponíveis não sejam suficientes, é possível criar componentes customizados para a ferramenta.
Os desenvolvedores do Streamlit já disponibilizaram alguns tutoriais que mostram como novos componentes podem ser criados.
Existe também a possibilidade de utilizar componentes desenvolvidos por terceiros, e que são disponibilizados como pacotes.
O site da ferramente chega a listar alguns desses componentes em seu <a href="https://streamlit.io/components">site oficial</a>.</p>
<h1>Desvantagens</h1>
<p>Como uma aplicação é definida em um <em>script</em>, qualquer intereção com um elemento da tela (botões, caixas de <em>inputs</em> para texto, cliques) todo o <em>script</em> é executado novamente.</p>
<p>Portanto, esse é um princípio que devemos sempre ter em mente:</p>
<blockquote class="blockquote">
<p>Em qualquer interação com a tela, todo o <em>script</em> é executado novamente!</p>
</blockquote>
<p>Caso não tomemos alguns cuidados, a nossa aplicação pode ficar lenta, e ter o efeito contrário de nosso objetivo inicial, que era mostrar o real valor do nosso modelo de <span class="caps">IA</span>.</p>
<p>Para lidar com esse problema podemos lançar mão de algumas boas práticas e recursos oferecidos pelo próprio Streamlit:</p>
<ol>
<li>Utilizar os recursos de <em>caching</em> (<a href="https://docs.streamlit.io/library/advanced-features/caching">ver documentação</a>) nas operações de leitura de dados, estabelecer conexões com banco de dados, ou subir um modelo de predição.</li>
<li>Comportamentos estranhos devido a constante atualização do estado (valores) das variáveis e componentes. (Veja <a href="https://docs.streamlit.io/library/advanced-features/button-behavior-and-examples">essa postagem</a> para entender mais sobre esse caso).</li>
</ol>
<p>O desenvolvimento do Streamlit é frenético e em poucos meses a <span class="caps">API</span> da biblioteca pode mudar significativamente.
Se por um lado isso permite entregar novas funcionalidades de forma rápida, por outro, aplicativos podem ficar rapidamente desatualizados e simplesmente quebrarem (isto é, não rodar mais).</p>
<p>Uma convensão adotada é adicionar o termo <code>experimental</code> em algumas funções, para indicar que elas são disponibilizadas em caráter de testes e que elas podem ser alteradas ou removidas entre uma versão e outra.
Esse fato detalhado <a href="https://docs.streamlit.io/library/advanced-features/prerelease">nessa seção</a> da documentação.</p>
<h1>Bônus: deploy o seu protótipo na nuvem</h1>
<p>A empresa que mantém o projeto do Streamlit também oferece o <em>Streamlit Community</em> que permite fazer o deploy de aplicações na nuvem.</p>
<p>O código da aplicação precisa estar em um repositório público do GitHub e com a devida atuorização para que o Streamlit Community se conecte a sua conta no GitHub. Seguindo passo-a-passo deste <a href="https://docs.streamlit.io/streamlit-community-cloud/get-started">tutorial</a> é bem fácil realizar essas configurações.</p>
<p>A versão gratuita do <em>Streamlit Community</em> permite aplicações que requeiram até 1Gb de memória, o que eu acho pouco, se pensarmos que alguns modelos de Deep Learning podem ser grandes.
Além disso, a versão gratuita permite apenas um app privado, e promete uma quantidade ilimitada de apps públicos.</p>
<p>Recentemente eu fiz um teste com o Streamlit Community, com uma aplicação que consulta a <span class="caps">API</span> de documentos do (famoso) <a href="https://sapl.santoantoniodaplatina.pr.leg.br/"><span class="caps">SAPL</span></a> e retorna um relatório com documentos cadastrados em determinada semana.
O repositório dessa aplicação pode ser encontrado <a href="https://github.com/giliardgodoi/streamlit-sapl/blob/main/01_INICIAL.py">nesse link</a>.</p>
<p>Existe uma grande variedade de outros exemplos de aplicações desenvolvidas com streamlit, e para citar algumas:</p>
<ol>
<li><a href="https://blog.streamlit.io/monte-carlo-simulations-with-streamlit/">Monte Carlo simulations with Streamlit</a></li>
<li><a href="https://blog.streamlit.io/semantic-search-part-1-implementing-cosine-similarity/">Semantic search, Part 1: Implementing cosine similarity (streamlit.io)</a></li>
<li><a href="https://blog.streamlit.io/scienceio-manages-billions-of-rows-of-training-data-with-streamlit/">ScienceIO manages billions of rows of training data with Streamlit</a></li>
<li><a href="https://blog.streamlit.io/esg-reporting-with-streamlit/"><span class="caps">ESG</span> reporting with Streamlit</a></li>
</ol>
    </div>
  </article>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
  <ul class="col-sm-6 list-inline">
    <li class="list-inline-item"><a href="../../../archives.html">Archives</a></li>
    <li class="list-inline-item"><a href="../../../categories.html">Categories</a></li>
      <li class="list-inline-item"><a href="../../../tags.html">Tags</a></li>
  </ul>
  <p class="col-sm-6 text-sm-right text-muted">
    Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
    / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
  </p>
</div>    </div>
  </footer>

</body>

</html>